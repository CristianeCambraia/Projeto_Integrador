{% extends 'base.html' %}
{% load static %}

{% block content %}
<style>
@media print {
  header, footer, .botoes {
    display: none !important;
  }
  body {
    margin: 0;
    padding: 20px;
  }
  .print-header {
    display: table !important;
  }
}
.print-header {
  display: none;
}
</style>

<div class="print-header">
  <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; padding: 0 80px;">
    <img src="{% static 'images/insumed_icon.png' %}" style="width: 100px; height: 100px;" alt="Logo">
    <h1 style="font-size: 48px; font-weight: bold; color: rgba(0, 0, 0, 0.12); margin: 0 120px;">INSUMED</h1>
    <img src="{% static 'images/insumed_icon.png' %}" style="width: 100px; height: 100px;" alt="Logo">
  </div>
</div>
<div class="emitir-orcamento-container">
  <h2 class="titulo" style="margin-bottom: 30px;">OrÃ§amento #{{ orcamento.id }}</h2>
  
  <div style="background-color: #f9f9f9; padding: 10px; border-radius: 5px; margin-bottom: 20px; border: 1px solid #ddd; width: 100%; box-sizing: border-box;">
      <h4 style="margin: 0 0 10px 0; text-align: center;">Dados da Empresa INSUMED</h4>
      <div style="display: grid; grid-template-columns: 2fr 1fr 1.2fr 0.8fr; gap: 8px; width: 100%;">
          <div>
              <label style="font-size: 12px; color: #666;">EndereÃ§o:</label>
              <input type="text" name="endereco_insumed" value="Rua das Flores, 123 - Centro" disabled style="width: 100%; padding: 5px; font-size: 12px; box-sizing: border-box; border-radius: 5px; border: 1px solid #ddd; background-color: #f0f0f0;">
          </div>
          <div>
              <label style="font-size: 12px; color: #666;">CNPJ:</label>
              <input type="text" name="cnpj_insumed" value="12.345.678/0001-90" disabled style="width: 100%; padding: 5px; font-size: 12px; box-sizing: border-box; border-radius: 5px; border: 1px solid #ddd; background-color: #f0f0f0;">
          </div>
          <div>
              <label style="font-size: 12px; color: #666;">E-mail:</label>
              <input type="email" name="email_insumed" value="contato@insumed.com.br" disabled style="width: 100%; padding: 5px; font-size: 12px; box-sizing: border-box; border-radius: 5px; border: 1px solid #ddd; background-color: #f0f0f0;">
          </div>
          <div>
              <label style="font-size: 12px; color: #666;">Telefone:</label>
              <input type="text" name="telefone_insumed" value="(35) 98412-3236" disabled style="width: 100%; padding: 5px; font-size: 12px; box-sizing: border-box; border-radius: 5px; border: 1px solid #ddd; background-color: #f0f0f0;">
          </div>
      </div>
  </div>

  <form class="form-box"  method="post" action="#">
    {% csrf_token %}

    <div class="cliente-dados">
      <div>
        <label><strong>Cliente:</strong></label>
        <input type="text" name="cliente" value="{{ orcamento.cliente }}" disabled>
      </div>
                    
      <div>
        <label><strong>Data:</strong></label>
        <input type="date" name="data" value="{{ orcamento.data|date:'Y-m-d' }}" disabled>
      </div>
                    
      <div>
        <label><strong>CNPJ:</strong></label>
        <input type="text" name="cnpj" value="{{ orcamento.cnpj }}" disabled>
      </div>
                    
      <div>
        <label><strong>EndereÃ§o:</strong></label>
        <input type="text" name="endereco" value="{{ orcamento.endereco }}" disabled>
      </div>
                    
      <div>
        <label><strong>Cidade:</strong></label>
        <input type="text" name="cidade" value="{{ orcamento.cidade }}" disabled>
      </div>
                    
      <div>
        <label><strong>UF:</strong></label>
        <input type="text" name="uf" value="{{ orcamento.uf }}" disabled>
      </div>
                    
      <div>
        <label><strong>E-mail:</strong></label>
        <input type="email" name="email" value="{{ orcamento.email }}" disabled>
      </div>
                    
      <div>
        <label><strong>Telefone:</strong></label>
        <input type="tel" name="telefone" value="{{ orcamento.telefone }}" disabled>
      </div>

    </div>

    <table class="itens-orcamento">
      <thead>
        <tr>
          <th>Unidade/ServiÃ§o</th>
          <th>DescriÃ§Ã£o</th>
          <th>Quantidade</th>
          <th>Valor</th>
        </tr>
      </thead>
      <tbody>
        {% for linha in linhas %}
        <tr>
          <td><input type="text" name="unidade_{{ forloop.counter }}" value="{{ linha.unidade }}" disabled></td>
          <td><input type="text" name="descricao_{{ forloop.counter }}" value="{{ linha.descricao }}" disabled></td>
          <td><input type="number" name="quantidade_{{ forloop.counter }}" min="1" value="{{ linha.quantidade }}" disabled></td>
          <td><input type="text" name="valor_{{ forloop.counter }}" value="{{ linha.valor }}" disabled></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <div style="margin: 20px 0; text-align: right;">
        <div style="margin-bottom: 10px;">
            <label><strong>Subtotal: R$ </strong></label>
            <input type="text" id="subtotal" value="{{ orcamento.subtotal_calculado }}" readonly style="background-color: #f0f0f0; font-weight: bold; width: 150px;">
        </div>
        {% if orcamento.desconto %}
        <div style="margin-bottom: 10px;">
            <label><strong>Desconto ({{ orcamento.desconto }}%): R$ </strong></label>
            <input type="text" id="valorDesconto" value="{{ orcamento.valor_desconto_calculado }}" readonly style="background-color: #f0f0f0; font-weight: bold; width: 150px;">
        </div>
        {% endif %}
        <div>
            <label><strong>Valor Total: R$ </strong></label>
            <input type="text" id="valorTotal" name="valor_total" value="{{ orcamento.valor_total_calculado }}" readonly style="background-color: #f0f0f0; font-weight: bold; width: 150px;">
        </div>
    </div>

    <div class="observacao-container">
        <label><strong>ObservaÃ§Ã£o:</strong></label>
        <textarea name="observacao" rows="4" disabled>{{ orcamento.observacao }}</textarea>
    </div>

    <div class="botoes">
      <button type="button" onclick="window.print()" class="btn-salvar">Imprimir ðŸ’¾</button>
      <a href="{% url 'exportar_pdf_orcamento' orcamento.id %}" class="btn-emitidos">Exportar PDF ðŸ“„</a>
      <a href="{% url 'orcamentos_emitidos' %}" class="btn-voltar">Voltar â¤´</a>
    </div>
  </form>
</div>


{% endblock %}
