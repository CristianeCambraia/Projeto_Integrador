{% extends 'base.html' %}

{% block content %}
<div class="emitir-orcamento-container">
  <h2 class="titulo">OrÃ§amento #{{ orcamento.id }}</h2>

  <form class="form-box"  method="post" action="#">
    {% csrf_token %}

    <div class="cliente-dados">
      <div>
        <label><strong>Cliente:</strong></label>
        <input type="text" name="cliente" value="{{ orcamento.cliente }}" disabled>
      </div>
                    
      <div>
        <label><strong>Data:</strong></label>
        <input type="date" name="data" value="{{ orcamento.data|date:'Y-m-d' }}" disabled>
      </div>
                    
      <div>
        <label><strong>CNPJ:</strong></label>
        <input type="text" name="cnpj" value="{{ orcamento.cnpj }}" disabled>
      </div>
                    
      <div>
        <label><strong>EndereÃ§o:</strong></label>
        <input type="text" name="endereco" value="{{ orcamento.endereco }}" disabled>
      </div>
                    
      <div>
        <label><strong>Cidade:</strong></label>
        <input type="text" name="cidade" value="{{ orcamento.cidade }}" disabled>
      </div>
                    
      <div>
        <label><strong>Telefone:</strong></label>
        <input type="tel" name="telefone" value="{{ orcamento.telefone }}" disabled>
      </div>
                    
      <div>
        <label><strong>E-mail:</strong></label>
        <input type="email" name="email" value="{{ orcamento.email }}" disabled>
      </div>

    </div>

    <table class="itens-orcamento">
      <thead>
        <tr>
          <th>Unidade</th>
          <th>DescriÃ§Ã£o</th>
          <th>Quantidade</th>
          <th>Valor</th>
        </tr>
      </thead>
      <tbody>
        {% for linha in linhas %}
        <tr>
          <td><input type="text" name="unidade_{{ forloop.counter }}" value="{{ linha.unidade }}" disabled></td>
          <td><input type="text" name="descricao_{{ forloop.counter }}" value="{{ linha.descricao }}" disabled></td>
          <td><input type="number" name="quantidade_{{ forloop.counter }}" min="1" value="{{ linha.quantidade }}" disabled></td>
          <td><input type="text" name="valor_{{ forloop.counter }}" value="{{ linha.valor }}" disabled></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <div style="margin: 20px 0; text-align: right;">
        <div style="margin-bottom: 10px;">
            <label><strong>Subtotal: R$ </strong></label>
            <input type="text" id="subtotal" value="{{ orcamento.subtotal_calculado }}" readonly style="background-color: #f0f0f0; font-weight: bold; width: 150px;">
        </div>
        {% if orcamento.desconto %}
        <div style="margin-bottom: 10px;">
            <label><strong>Desconto ({{ orcamento.desconto }}%): R$ </strong></label>
            <input type="text" id="valorDesconto" value="{{ orcamento.valor_desconto_calculado }}" readonly style="background-color: #f0f0f0; font-weight: bold; width: 150px;">
        </div>
        {% endif %}
        <div>
            <label><strong>Valor Total: R$ </strong></label>
            <input type="text" id="valorTotal" name="valor_total" value="{{ orcamento.valor_total_calculado }}" readonly style="background-color: #f0f0f0; font-weight: bold; width: 150px;">
        </div>
    </div>

    <div class="observacao-container">
        <label><strong>ObservaÃ§Ã£o:</strong></label>
        <textarea name="observacao" rows="4" disabled>{{ orcamento.observacao }}</textarea>
    </div>

    <div class="botoes">
      <button type="button" onclick="window.print()" class="btn-salvar">Imprimir ðŸ’¾</button>
      <a href="{% url 'exportar_pdf_orcamento' orcamento.id %}" class="btn-emitidos">Exportar PDF ðŸ“„</a>
      <a href="{% url 'orcamentos_emitidos' %}" class="btn-voltar">Voltar â¤´</a>
    </div>
  </form>
</div>


{% endblock %}
