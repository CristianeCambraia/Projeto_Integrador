{% extends 'base.html' %}

{% block content %}
<div class="container-lista-orcamentos">
  <h2>Orçamentos Emitidos</h2>
  
  <div class="filtro-orcamentos">
    <form method="GET">
      <input type="number" name="filtro_id" placeholder="Filtrar por ID" value="{{ filtro_id }}">
      <button type="submit" class="btn-filtrar">Filtrar</button>
      <a href="{% url 'orcamentos_emitidos' %}" class="btn-limpar">Limpar</a>
    </form>
  </div>

  <ul class="lista-orcamentos">
    {% for o in orcamentos %}
      <li class="item-orcamento">
        <div class="row-two-col">
          <div class="col-left">
            <div class="field"><strong>ID:</strong> {{ o.id }}</div>
            <div class="field"><strong>Cliente:</strong> {{ o.cliente }}</div>
            <div class="field"><strong>Data:</strong> {{ o.data|date:"d/m/Y" }}</div>
            <div class="field"><strong>CNPJ:</strong> {{ o.cnpj }}</div>
          </div>
          <div class="col-right">
            <div class="field"><strong>Descrição:</strong> {{ o.descricao|default:"(Sem descrição)" }}</div>
            <div class="field"><strong>Telefone:</strong> {{ o.telefone }}</div>
            <div class="field"><strong>E-mail:</strong> {{ o.email }}</div>
             <div class="field"><strong>Quantidades:</strong> {{ o.itens_quantidades|default:"(Sem quantidades)" }}</div>
             <div class="field"><strong>Valores:</strong> {{ o.itens_valores|default:"(Sem valores)" }}</div>
             <div class="field"><strong>Observações:</strong> {{ o.observacao|default:"(Sem observações)" }}</div>
            <div style="margin-top:10px;">
              <a href="{% url 'abrir_orcamento' o.id %}" class="btn-info">Abrir</a>
            </div>
          </div>
        </div>
      </li>
    {% empty %}
      <li>Nenhum orçamento emitido.</li>
    {% endfor %}
  </ul>

  <div class="botoes-orcamento">
    <a href="{% url 'emitir_orcamento' %}" class="btn-padrao">Novo Orçamento ➕</a>
    <a href="{% url 'novo_orcamento' %}" class="btn-padrao voltar">Voltar ⤴</a>
  </div>
</div>
{% endblock %}
